---
import { Debug } from 'astro/components';
import { Image, Picture } from '@astrojs/image/components';
import Base from '../layouts/Base.astro'
import ContactCard from '../components/ContactCard.astro';
import lake from '../assets/images/lake.png'
import phone from '../assets/images/phone-icon.svg'
import computer from '../assets/images/computer-icon.svg'
import house from '../assets/images/house-icon.svg'

const actionUrl = `https://kwesforms.com/api/foreign/forms/Uk2Iku60jQt2t34QhaWr`
const sessionOptions = [
  {
    label: 'Over the telephone',
    img: phone
  },
  {
    label: 'Video conferencing',
    img: computer
  },
  {
    label: 'At your home',
    img: house
  },
]
---
<script src="https://kwesforms.com/v2/kwes-script.js" defer></script>
<script>
  import kwesforms from 'kwesforms';
  const usPhone = /(?:\d{1}\s)?\(?(\d{3})\)?-?\s?(\d{3})-?\s?(\d{4})/g
  const errorMessage = `Phone number does not match...`
  kwesforms.init();

  kwesforms.setCustomRule(
    'contact',
    'phone',
    errorMessage,
    value => {
        return value.test(usPhone) === true;
    }
);
</script>
<Base>
  <section class="pl-8rem pb-3rem">
    <h1 class="hidden">Contact</h1>
    <h2 class="w-1/3 font-dserif text-midnight-blue text-6xl mb-4">Change starts with a single step forward</h2>
  </section>
  <section class="relative flex flex-col bg-white w-full px-3.5rem">
    <Picture alt="" sizes="" src={lake} widths={[lake.width]} />
    <div class="absolute flex flex-row justify-end items-center w-4/5 h-full z-15">
        <div class="flex flex-col justify-evenly items-center w-2/5 h-4/5 bg-white shadow-md">
          <div class="w-full h-full flex flex-col justify-evenly items-center p-12">
            <h2 class="font-dserif text-5xl text-midnight-blue" >Let's Connect</h2>
              <form class="kwes-form w-full py-1rem flex flex-col" action={actionUrl} method="POST" client:load>
                <label for="first">First Name</label>
                <input type="text" name="first" rules="required|max:150">
                <label for="last">Last Name</label>
                <input type="text" name="last" rules="required|max:150">
                <label for="email">Email</label>
                <input type="text" name="email" rules="required|email">
                <label for="phone">Phone</label>
                <input type="number" name="phone">
                <label for="message">Message</label>
                <textarea name="message" rules="max:300" />

                <button type="submit" class="w=1/2 bg-midnight-blue px-6 py-4 mt-8 shadow-sm font-dsans text-white text-center text-xl">
                  Submit
                </button>
              </form>
          </div>
        </div>
    </div>
  </section>
  <!-- CONTACT INFO & SESSION OPTIONS -->
  <section id="info" class="w-full flex flex-col justify-center items-center">
    <h3 class="w-1/3 font-dserif text-center text-midnight-blue text-6xl mb-4">Contact<br>Information</h3>
      <ContactCard />
  </section>
  <section class="w-full flex flex-col justify-center items-center">
    <h3 class="w-full flex flex-col justify-center items-center">Session Options Including:</h3>
    {
      sessionOptions.map((option) => (
        // <Debug {option} />
        <div>
          <Image alt="" sizes="" width={100} src={option.img} fit="cover" aspectRatio="1:1" />
          <p id="over-the-telephone">Over the telephone</p>
        </div>
      ))
    }
<!--
      <div id="phone-option">
        <div id="phone-icon">
          <img alt="" id="vector" src="../assets/images/phone-icon.svg" />
        </div>
        <p id="over-the-telephone">Over the telephone</p>
      </div>

      <div id="video-option">
        <div id="frame">
          <img
            alt=""
            id="vector-two"
            src="../assets/images/computer-icon.svg"
          />
        </div>
        <p id="video-conference">Video conference</p>
      </div>

      <div id="house-option">
        <div id="house-icon">
          <img
            alt=""
            id="vector-two"
            src="../assets/images/house-icon.svg"
          />
        </div>
        <p id="at-your-home">At your home</p>
      </div> -->

  </section>
</Base>